<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<title>James' Magic Shop</title>
		<link rel="stylesheet" type="text/css" href="css/blueprint.css">
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<script type="text/javascript" src="js/jquery.js"></script>
		<script type="text/javascript" src="js/jquery-ui.js"></script>
		<script type="text/javascript" src="js/underscore.js"></script>
		<script type="text/javascript" src="js/backbone.js"></script>
	</head>
	<body>
		<div id="app" class="container outer">
			<div class="span-24 header">
				<div class="span-12 header relative">
					<h1 class="title valign-bottom">
						<b>James' Magic Shop</b>
					</h1>
				</div>
				<div class="span-12 last header relative">
					<div class="span-12 last valign-bottom">
						<div class="align-right">
							<a id="viewCartLink" href="#cart" class="light">
								View Cart (<span id="cartItemCount"></span>)
							</a>
						</div>
						<div class="align-right">
							<form id="searchForm">
								<input id="searchText" type="text" placeholder="Search">
								<input type="submit" value="Go">
							</form>
						</div>
					</div>
				</div>
			</div>
			<div class="span-24 bg-cols">
				<div class="span-6">
					<div id="categoryList" class="padded">
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript" src="js/models/CartItem.js"></script>
		<script type="text/javascript" src="js/models/Category.js"></script>
		<script type="text/javascript" src="js/models/Item.js"></script>
		<script type="text/javascript" src="js/collections/Cart.js"></script>
		<script type="text/javascript" src="js/collections/CategoryList.js"></script>
		<script type="text/javascript" src="js/collections/Inventory.js"></script>
		<script type="text/javascript" src="js/views/AppView.js"></script>
		<script type="text/javascript" src="js/Router.js"></script>
		<script type="text/javascript">
			// instantiate all of the top-level models
			firebird.cart = new firebird.Cart();
			firebird.categories = new firebird.CategoryList();
			firebird.inventory = new firebird.Inventory();
			firebird.app = new firebird.AppView();

			// load data from server
			//firebird.categories.fetch();
			//firebird.inventory.fetch();

			// test data
			firebird.categories.reset([
				new firebird.Category({ id: 1, name: "Books" }),
				new firebird.Category({ id: 2, name: "Card Magic" }),
				new firebird.Category({ id: 3, name: "Coin Magic" }),
				new firebird.Category({ id: 4, name: "Juggling" }),
				new firebird.Category({ id: 5, name: "Rope Magic" })
			]);

			// start routing urls and navigate to the main inventory unless the url
			// already has a hash
			firebird.router = new firebird.Router();

			if (!location.hash)
				location.hash = "shop";
		</script>
	</body>
</html>
